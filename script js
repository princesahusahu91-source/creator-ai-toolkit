document.getElementById("waitlistForm").addEventListener("submit", function(e) {
  e.preventDefault();
  document.getElementById("successMsg").classList.remove("hidden");
  document.getElementById("email").value = "";
});

const generateBtn = document.getElementById("generateBtn");
const output = document.getElementById("output");

generateBtn.addEventListener("click", async () => {
  const niche = document.getElementById("niche").value.trim();
  const topic = document.getElementById("topic").value.trim();

  if (!niche || !topic) {
    output.innerText = "❌ Please enter niche and topic.";
    return;
  }

  output.innerText = "⏳ Generating viral hooks...";

  try {
    const res = await fetch("/api/generate", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ niche, topic })
    });

    if (!res.ok) throw new Error("API error");

    const data = await res.json();
    output.innerText = data.result || "No result returned.";

  } catch (err) {
    console.error(err);
    output.innerText = "⚠️ Backend not connected yet. Next step: connect free API backend.";
  }
});
