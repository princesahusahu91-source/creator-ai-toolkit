<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AI Content Tools</title>
<style>
body{font-family:Inter,system-ui,sans-serif;background:#f6f9ff;margin:0;padding:20px}
.container{max-width:900px;margin:auto}
h1{margin-bottom:10px}
textarea{width:100%;min-height:120px;padding:12px;border-radius:10px;border:1px solid #ddd}
button{padding:12px 16px;border:none;border-radius:10px;background:#3b82f6;color:#fff;font-weight:600;cursor:pointer}
.result{margin-top:16px;padding:14px;background:#fff;border-radius:12px;border:1px solid #e5e7eb;white-space:pre-wrap}
.back{margin-bottom:16px;display:inline-block;color:#3b82f6;text-decoration:none;font-weight:600}
.user{font-size:13px;color:#6b7280;margin-bottom:10px}
</style>
</head>
<body>

<div class="container">
  <a class="back" href="index.html">â† Back to Dashboard</a>

  <div class="user" id="userStatus">Not logged in</div>

  <h1>ğŸ¤– AI Content Generator</h1>
  <p>Enter your topic and get captions, hooks, or ideas.</p>

  <textarea id="prompt" placeholder="Example: Instagram reel about fitness motivation"></textarea>
  <br><br>
  <button onclick="generate()">Generate</button>

  <div class="result" id="result">Your AI result will appear here...</div>
</div>

<script>
let currentUser = null;

async function generate() {
  const text = document.getElementById("prompt").value.trim();
  if (!text) {
    alert("Enter a topic first!");
    return;
  }

  const outputs = [
    "ğŸ”¥ Hook: Stop scrolling if you want real results!",
    "ğŸ“Œ Caption: Consistency beats motivation. Start today.",
    "ğŸ¯ CTA: Follow for daily growth hacks.",
    "ğŸ¬ Reel Script: Problem â†’ Struggle â†’ Solution â†’ Call to Action"
  ];

  document.getElementById("result").innerText =
    "AI Suggestions for: " + text + "\n\n" + outputs.join("\n");

  // Local analytics (your analytics.html)
  localStorage.setItem("ai_uses", (Number(localStorage.getItem("ai_uses")) || 0) + 1);

  // Firebase analytics (per user)
  if (currentUser && window.firebase) {
    const ref = window.firebase.doc(window.firebase.db, "users", currentUser.uid);
    await window.firebase.setDoc(ref, { ai_uses: window.firebase.increment(1) }, { merge: true });
  }
}
</script>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
  import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-analytics.js";
  import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
  import { getFirestore, doc, setDoc, getDoc, updateDoc, increment } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyBNmhGuP_v-GNLDE7KV_Y0xNn1Ih8WhyOU",
    authDomain: "creator-ai-toolkit-af68a.firebaseapp.com",
    projectId: "creator-ai-toolkit-af68a",
    storageBucket: "creator-ai-toolkit-af68a.firebasestorage.app",
    messagingSenderId: "962751771924",
    appId: "1:962751771924:web:b66ddce257c9b19c56fe01",
    measurementId: "G-1JYTQVYCKE"
  };

  const app = initializeApp(firebaseConfig);
  getAnalytics(app);
  const auth = getAuth(app);
  const db = getFirestore(app);

  window.firebase = { db, doc, setDoc, getDoc, updateDoc, increment };

  onAuthStateChanged(auth, (user) => {
    if (user) {
      currentUser = user;
      document.getElementById("userStatus").innerText = "Logged in: " + user.email;
    } else {
      currentUser = null;
      document.getElementById("userStatus").innerText = "Not logged in";
    }
  });
</script>

</body>
</html>
